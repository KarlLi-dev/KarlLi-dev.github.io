var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(s,n){function o(t){try{a(r.next(t))}catch(e){n(e)}}function _(t){try{a(r["throw"](t))}catch(e){n(e)}}function a(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,_)}a((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(r){i=[6,r],n=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,n,o,_,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return _={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_},ns_sirius;!function(t){var e=function(){function t(){this._is_destroyed=!1}return Object.defineProperty(t.prototype,"is_destroyed",{get:function(){return this._is_destroyed},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._before_destroy(),this._is_destroyed=!0},t.prototype._before_destroy=function(){},t}();t.sirius_base_object=e,__reflect(e.prototype,"ns_sirius.sirius_base_object",["ns_sirius.Isirius_base_object"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._is_destroyed=!1,e.mark_as_fullfill(),console.log("[ "+e.constructor.name+" ] ALLOC"),e}return __extends(e,t),e.prototype.local_vm=function(){var t=this.pair_vm;return t},e.prototype.destroy=function(){this._before_destroy(),this._is_destroyed=!0},e.prototype._remove_self_from_nfc=function(){sirius.nfc.remove_target(this)},e.prototype._before_destroy=function(){console.log("[ "+this.constructor.name+" ] destroy"),this._view_before_destroy(),this.remove_all_children(),this.remove_from_parent(),this.init_param=null,this.pair_vm=null},e.prototype.view_pre_init=function(t,e,i){this.init_param=t,this.pair_vm=e,this._sirius=i.sirius_public,this._view_before_init()},e.prototype.view_init=function(){this._view_start_init()},e.prototype.module_exit=function(){this.pair_vm&&this.pair_vm.module_exit()},e.prototype.attached_to_display_tree=function(t){},e.prototype._view_before_init=function(){},e.prototype._view_start_init=function(){},e.prototype.detaching_from_display_tree=function(t){void 0===t&&(t=null)},e.prototype._view_before_destroy=function(){},e.prototype.remove_all_children=function(){this.removeChildren()},e.prototype.remove_from_parent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.update_visible=function(t){this.visible=t},e.prototype.mark_as_fullfill=function(){this.percentWidth=100,this.percentHeight=100,this.x=0,this.y=0},e.prototype.set_bg_color=function(t,e){void 0===e&&(e=1);var i=new eui.Rect;return this.addChildAt(i,0),i.fillColor=t,i.percentWidth=100,i.percentHeight=100,i.alpha=e,i},e}(eui.Component);t.sirius_module_view=e,__reflect(e.prototype,"ns_sirius.sirius_module_view",["ns_sirius.Isirius_view_base","ns_sirius.Isirius_base_object"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._layer_index=0,console.log("[ "+e.constructor.name+" ] ALLOC"),e.pair_view=null,e.init_param=null,e}return __extends(e,t),e.prototype.register_layer_index=function(t){this._layer_index=t},Object.defineProperty(e.prototype,"mkey",{get:function(){return this._mkey},enumerable:!0,configurable:!0}),e.prototype.register_module_key=function(t){this._mkey=t},e.prototype.local_view=function(){var t=this.pair_view;return t},e.prototype._before_destroy=function(){console.log("[ "+this.constructor.name+" ] destroy"),this._vm_before_destroy(),this.init_param=null,this.pair_view=null},e.prototype.vm_pre_init=function(t,e,i){this.init_param=t,this.pair_view=e,this._sirius=i.sirius_public,this._vm_before_init()},e.prototype.vm_init=function(){this._vm_start_init()},e.prototype.module_exit=function(){this._is_destroyed||(sirius.view_manager.remove_module(this,this._layer_index),this.destroy())},e.prototype._vm_before_init=function(){},e.prototype._vm_start_init=function(){},e.prototype._vm_before_destroy=function(){},e}(t.sirius_base_object);t.module_vm_base=e,__reflect(e.prototype,"ns_sirius.module_vm_base")}(ns_sirius||(ns_sirius={}));var AppModuleViewBase=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.attached_to_display_tree=function(t){},e.prototype._view_before_init=function(){},e.prototype._view_start_init=function(){},e.prototype.detaching_from_display_tree=function(t){void 0===t&&(t=null)},e.prototype._view_before_destroy=function(){},e}(ns_sirius.sirius_module_view);__reflect(AppModuleViewBase.prototype,"AppModuleViewBase");var AppModuleVMBase=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype._vm_before_init=function(){},e.prototype._vm_start_init=function(){},e.prototype._vm_before_destroy=function(){},e}(ns_sirius.module_vm_base);__reflect(AppModuleVMBase.prototype,"AppModuleVMBase");var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mstack=new Array,e._top=-1,e}return __extends(e,t),e.prototype.manager_init=function(t,e,i){this._root_view=t,this.layer_id=e,this._sirius=i},e.prototype.get_root_view=function(){return this._root_view},e.prototype._s_is_empty=function(){return this._top<0?!0:!1},e.prototype._s_push=function(t){this._top<0&&(this._top=-1),this._top++,this._mstack[this._top]=t},e.prototype._s_pop=function(){this._s_is_empty()||(this._mstack[this._top]=null,this._top--)},e.prototype._s_shift=function(){if(!this._s_is_empty()){for(var t=0;t<this._top;t++)this._mstack[t]=this._mstack[t+1];this._mstack[this._top]=null,this._top--}},e.prototype._s_remove=function(t){if(!(this._s_is_empty()||0>t)){for(var e=t;e<this._top;e++)this._mstack[e]=this._mstack[e+1];this._mstack[this._top]=null,this._top--}},e.prototype._s_clear=function(){if(!this._s_is_empty()){for(var t=0;t<=this._top;t++)this._mstack[t]=null;this._top=-1}},e.prototype._s_top=function(){return this._s_is_empty()?null:this._mstack[this._top]},e.prototype._s_bottom=function(){return this._s_is_empty()?null:this._mstack[0]},e.prototype._update_container_visible=function(){this._s_is_empty()?this._root_view.update_visible(!1):this._root_view.update_visible(!0)},e}(t.sirius_base_object);t.layer_stack_manager=e,__reflect(e.prototype,"ns_sirius.layer_stack_manager",["ns_sirius.Isirius_layer_manager"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.core_init=function(t){this._sirius=t},e}(t.sirius_base_object);t.sirius_element_module=e,__reflect(e.prototype,"ns_sirius.sirius_element_module")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._is_destroyed=!1,e}return __extends(e,t),e.prototype.destroy=function(){this._before_destroy(),this._is_destroyed=!0},e.prototype._before_destroy=function(){this._view_before_destroy(),this.remove_all_children(),this.remove_from_parent()},e.prototype.attached_to_display_tree=function(t){},e.prototype.detaching_from_display_tree=function(t){void 0===t&&(t=null)},e.prototype._view_before_destroy=function(){},e.prototype.remove_all_children=function(){this.removeChildren()},e.prototype.remove_from_parent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.update_visible=function(t){this.visible=t},e.prototype.mark_as_fullfill=function(){this.percentWidth=100,this.percentHeight=100,this.x=0,this.y=0},e.prototype.set_bg_color=function(t,e){void 0===e&&(e=1);var i=new eui.Rect;return this.addChildAt(i,0),i.fillColor=t,i.percentWidth=100,i.percentHeight=100,i.alpha=e,i},e}(eui.Group);t.sirius_view_base=e,__reflect(e.prototype,"ns_sirius.sirius_view_base",["ns_sirius.Isirius_view_base","ns_sirius.Isirius_base_object"]);var i=function(t){function e(){var e=t.call(this)||this;return e._is_destroyed=!1,e}return __extends(e,t),e.prototype.destroy=function(){this._before_destroy(),this._is_destroyed=!0},e.prototype._before_destroy=function(){this._view_before_destroy(),this.remove_all_children(),this.remove_from_parent()},e.prototype.attached_to_display_tree=function(t){},e.prototype.detaching_from_display_tree=function(t){void 0===t&&(t=null)},e.prototype._view_before_destroy=function(){},e.prototype.remove_all_children=function(){this.removeChildren()},e.prototype.remove_from_parent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.update_visible=function(t){this.visible=t},e.prototype.mark_as_fullfill=function(){},e.prototype.set_bg_color=function(t,e){return void 0===e&&(e=1),null},e}(egret.DisplayObjectContainer);t.sirius_game_view_base=i,__reflect(i.prototype,"ns_sirius.sirius_game_view_base",["ns_sirius.Isirius_view_base","ns_sirius.Isirius_base_object"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._machine=null,e}return __extends(e,t),e.prototype._before_destroy=function(){this._machine=null},e.prototype.state_init=function(t,e){this._machine=t,this._convert_context(e),this._behaviors_init(),this._after_state_init()},e.prototype._convert_context=function(t){},e.prototype._behaviors_init=function(){},e.prototype._after_state_init=function(){},e.prototype.state_enum=function(){return 0},e.prototype.state_str=function(){return""},e.prototype.state_enter=function(t,e){void 0===e&&(e=null)},e.prototype.state_leave=function(t,e){void 0===e&&(e=null)},e.prototype.state_update=function(){},e}(t.sirius_base_object);t.GP_StateBase=e,__reflect(e.prototype,"ns_sirius.GP_StateBase")}(ns_sirius||(ns_sirius={}));var TestModuleVM=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype._vm_before_init=function(){},e.prototype._vm_start_init=function(){},e.prototype._vm_before_destroy=function(){},e.prototype.random=function(){var t=this,e="slot/getresult",i={};new ns_sirius.common_req({disable_loading:!0}).post(e,i,this).then(function(e){setTimeout(function(){t.local_view().success(e.v.id)},3e3)},function(t){})},e}(AppModuleVMBase);__reflect(TestModuleVM.prototype,"TestModuleVM");var TestModuleView=function(t){function e(){var e=t.call(this)||this,i=new eui.Image;return i.width=640,i.height=1136,i.verticalCenter=0,i.horizontalCenter=0,e.addChild(i),i.source="bg_jpg",e.btn=new eui.Image,e.btn.width=246,e.btn.height=153,e.btn.bottom=75,e.btn.horizontalCenter=0,e.addChild(e.btn),e.btn.source="button_png",e.slotView01=new SlotView,e.addChild(e.slotView01),e.slotView01.width=128,e.slotView01.height=260,e.slotView01.verticalCenter=-33,e.slotView01.horizontalCenter=-150,e.slotView02=new SlotView,e.addChild(e.slotView02),e.slotView02.width=128,e.slotView02.height=260,e.slotView02.verticalCenter=-33,e.slotView02.horizontalCenter=5,e.slotView03=new SlotView,e.addChild(e.slotView03),e.slotView03.width=128,e.slotView03.height=260,e.slotView03.verticalCenter=-33,e.slotView03.horizontalCenter=160,e.slotView01.initData(),e.slotView02.initData(),e.slotView03.initData(),e.result=new eui.Label,e.addChild(e.result),e.result.size=22,e.result.textAlign="center",e.result.verticalAlign=egret.VerticalAlign.MIDDLE,e.result.top=50,e.result.horizontalCenter=0,e.result.width=400,e.result.height=80,e.result.textColor=16777215,e.result.text="最后结束的位置：",e.result.background=!0,e.result.backgroundColor=7583684,e.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.btn_click,e),e}return __extends(e,t),e.prototype.attached_to_display_tree=function(t){},e.prototype._view_before_init=function(){},e.prototype._view_start_init=function(){},e.prototype.detaching_from_display_tree=function(t){void 0===t&&(t=null)},e.prototype._view_before_destroy=function(){},e.prototype.btn_click=function(){var t=this;this.slotView01.start(),setTimeout(function(){t.slotView02.start()},30),setTimeout(function(){t.slotView03.start()},60),this.local_vm().random()},e.prototype.success=function(t){var e=this,i=RES.getRes("slot_json"),r=i[t],s="最后结束的位置：";s+=r.IconA,this.result.text=s,this.slotView01.stop(r.IconA),setTimeout(function(){s+=", "+r.IconB,e.result.text=s,e.slotView02.stop(r.IconB)},1e3),setTimeout(function(){s+=", "+r.IconC,e.result.text=s,e.slotView03.stop(r.IconC)},2e3),setTimeout(function(){s+="\n 奖励："+e.getBonus(r.IconA,r.IconB,r.IconC),e.result.text=s},2e3)},e.prototype.getBonus=function(t,e,i){for(var r=RES.getRes("slot_reward_json"),s=r,n=Object.keys(s),o=0;o<n.length;o++){console.log(n[o]);for(var _=s[n[o]],a=Object.keys(_),l=0;l<a.length;l++){var u=_[a[l]],c=u.IconA,p=u.IconB,h=u.IconC,f=!1,d=!1,m=!1;if("*"==c)f=!0;else{if(c!=t)continue;f=!0}if("*"==p)d=!0;else{if(p!=e)continue;d=!0}if("*"==h)m=!0;else{if(h!=i)continue;m=!0}if(f&&d&&m)return u.reward}}return"没有奖品"},e}(AppModuleViewBase);__reflect(TestModuleView.prototype,"TestModuleView");var ns_sirius;!function(t){function e(){var t=egret.TextField.prototype.$getLinesArr2;egret.TextField.prototype.$getLinesArr2=function(){return this.$TextField[19]=!0,t.call(this)}}t.egret_enhance=e}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(e){function i(t,i,r){void 0===t&&(t=null),void 0===i&&(i=0),void 0===r&&(r=null);var s=e.call(this)||this;return s._listener=t,s.timer_id=i,s._param=r,s}return __extends(i,e),i.prototype.init=function(t){return void 0===t&&(t=null),this.timer_active(),this},i.prototype.timer_active=function(e){void 0===e&&(e=null),e?e.add(this):t.world_clock.add(this)},i.prototype.timer_deactive=function(){this._clock&&this._clock.remove(this)},i.prototype._before_destroy=function(){this.stop(),this._clock&&this._clock.remove(this),this._clock=null,this._listener=null,this._param=null},Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"is_animating",{get:function(){return this._is_animating},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tick_cursor",{get:function(){return this._tick_cursor},enumerable:!0,configurable:!0}),i.prototype.start=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=!1),this._normalized_time=0,this._real_time=0,this._tick_cursor=0,this._is_animating=!0,this._anim_duration=t,this._loop_count=e,r?this._tick_once():i>0&&(this._real_time+=i),this},i.prototype.stop=function(){this._is_animating=!1},i.prototype.update=function(t){this._is_animating&&(this._real_time+=t,this._normalized_time=this._real_time/this._anim_duration,this._normalized_time<1||(this._tick_once(),this._loop_count<=0||this._tick_cursor>=this._loop_count&&(this.stop(),this._post_finish())))},i.prototype._tick_once=function(){this._normalized_time=0,this._real_time=0,this._listener.rtimer_tick(this),this._tick_cursor++},i.prototype._post_finish=function(){this._listener.rtimer_finish(this)},i}(t.sirius_base_object);t.timer_rtime_based=e,__reflect(e.prototype,"ns_sirius.timer_rtime_based",["ns_sirius.IAnimatable"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(e){function i(t,i,r,s){void 0===t&&(t=null),void 0===i&&(i=null),void 0===r&&(r=0),void 0===s&&(s=null);var n=e.call(this)||this;return n._is_destroyed=!1,n._listener=t,n.anim_id=r,n._init_param=s,n._target_view=i,n}return __extends(i,e),i.prototype._before_destroy=function(){this._is_destroyed=!0,this.stop(),this._clock&&this._clock.remove(this),this._clock=null,this._listener=null,this._init_param=null,this._param=null,this._target_view=null},i.prototype.init=function(t){return void 0===t&&(t=null),this.anim_active(t),this},i.prototype.anim_active=function(e){void 0===e&&(e=null),e?e.add(this):t.world_clock.add(this)},i.prototype.anim_deactive=function(){this._clock&&this._clock.remove(this)},Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock=t},enumerable:!0,configurable:!0}),i.prototype.is_disposable=function(){return!1},Object.defineProperty(i.prototype,"is_animating",{get:function(){return this._is_animating},enumerable:!0,configurable:!0}),i.prototype.start=function(t){this._param=t,this._normalized_time=0,this._real_time=0,this._anim_duration=this.animation_duration(),this._is_animating=!0,this._reset_anim_properties()},i.prototype.stop=function(){this._is_animating=!1,this._normalized_time=0,this._real_time=0,this._reset_anim_properties()},i.prototype.update=function(t){this._is_animating&&(this._real_time+=t,this._normalized_time=this._real_time/this._anim_duration,this._normalized_time>1?this._anim_update(1):this._anim_update(this._normalized_time),this._normalized_time<1||(this.stop(),this._listener&&this._listener.anim_ft_comp(this),this.is_disposable()&&this.destroy()))},i.prototype.util_linear_interpolation=function(t,e,i){return t+(e-t)*i},i}(t.sirius_base_object);t.anim_fixed_time=e,__reflect(e.prototype,"ns_sirius.anim_fixed_time",["ns_sirius.IAnimatable"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(){}return t.prototype.cal_magnitude=function(){this.gravity_magnitude=Math.sqrt(this.gravity_vector.x*this.gravity_vector.x+this.gravity_vector.y*this.gravity_vector.y),this.speed_magnitude=Math.sqrt(this.speed_vector.x*this.speed_vector.x+this.speed_vector.y*this.speed_vector.y)},t}();t.anim_gravity_param=e,__reflect(e.prototype,"ns_sirius.anim_gravity_param");var i=function(e){function i(t,i,r){void 0===t&&(t=null),void 0===i&&(i=null),void 0===r&&(r=0);var s=e.call(this)||this;return s._is_destroyed=!1,s._cur_pos=new egret.Point,s._listener=t,s.anim_id=r,s._target_view=i,s._after_init(),s}return __extends(i,e),i.prototype._before_destroy=function(){this._is_destroyed=!0,this.stop(),this._clock&&this._clock.remove(this),this._clock=null,this._listener=null,this._param=null,this._target_view=null},i.prototype._after_init=function(){},i.prototype.init=function(t){return void 0===t&&(t=null),this.anim_active(t),this},i.prototype.anim_active=function(e){void 0===e&&(e=null),e?e.add(this):t.world_clock.add(this)},i.prototype.anim_deactive=function(){this._clock&&this._clock.remove(this)},Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"is_animating",{get:function(){return this._is_animating},enumerable:!0,configurable:!0}),i.prototype.start=function(t){this._param=t,this._param.cal_magnitude(),this._real_time=0,this._is_animating=!0,this._cur_pos.copyFrom(this._param.start_position),this._reset_anim_properties()},i.prototype.stop=function(){this._is_animating=!1,this._real_time=0,this._listener&&this._listener.anim_gravity_comp(this),this._reset_anim_properties()},i.prototype._before_update=function(t){},i.prototype._update_position=function(t){var e=this._real_time/1e3;this._cur_pos.y=this._param.start_position.y+this._param.speed_vector.y*e+.5*this._param.gravity_magnitude*e*e},i.prototype.update=function(t){this._is_animating&&(this._before_update(t),this._update_position(t),this._anim_update(t),this._real_time+=t)},i.prototype._syn_view_pos=function(){this._target_view.y=this._cur_pos.y,this._target_view.x=this._cur_pos.x},i.prototype.util_linear_interpolation=function(t,e,i){return t+(e-t)*i},i}(t.sirius_base_object);t.anim_gravity=i,__reflect(i.prototype,"ns_sirius.anim_gravity",["ns_sirius.IAnimatable"])}(ns_sirius||(ns_sirius={}));var sirius_internal_type;!function(t){t[t["null"]=0]="null",t[t["boolean"]=1]="boolean",t[t.integer=2]="integer",t[t["float"]=3]="float",t[t.string=4]="string",t[t.array=5]="array",t[t.object=6]="object"}(sirius_internal_type||(sirius_internal_type={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.design_width=1136,e.design_height=640,e.stage_width=0,e.stage_height=0,e.safe_width=0,e.safe_height=0,e.popup_width=0,e.popup_height=0,e.popup_con_width=0,e.popup_con_height=0,e.initial_optimal_w=0,e}return __extends(e,t),e.prototype.syn_stage_size=function(t,e){this.stage_width=t,this.stage_height=e,this.safe_height=e,this.safe_width=t>this.design_width?this.design_width:t,this.popup_height=.637*this.safe_height,this.popup_width=.746*this.popup_height,this.popup_con_width=Math.floor(.691*this.popup_height),this.popup_con_height=Math.floor(.905*this.popup_height)},e.prototype.device_info_init=function(){var t=Math.ceil(1125*this.design_height/2436);this.stage_width>=this.design_width?this.initial_optimal_w=this.design_width:this.initial_optimal_w=t},e}(t.sirius_base_object);t.sirius_device_info=e,__reflect(e.prototype,"ns_sirius.sirius_device_info")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.after_state_init=function(){},e.prototype.state_enum=function(){return 0},e.prototype.state_str=function(){return"Default"},e.prototype.state_enter=function(t,e){void 0===e&&(e=null)},e.prototype.state_leave=function(t,e){void 0===e&&(e=null)},e}(t.GP_StateBase);t.GP_State_Default=e,__reflect(e.prototype,"ns_sirius.GP_State_Default")}(ns_sirius||(ns_sirius={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ns_sirius;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._s_default=new t.GP_State_Default,i._current_state=new t.GP_State_Default,i._listener=null,i._ctx=null,i}return __extends(i,e),i.prototype._before_destroy=function(){this._ctx=null,this._listener=null,this._current_state=null,this._s_default.destroy(),this._s_default=null},i.prototype.get_current_state=function(){return this._current_state},i.prototype.get_current_state_str=function(){return this._current_state.state_str()},i.prototype.get_current_state_enum=function(){return this._current_state.state_enum()},i.prototype.machine_initialize=function(t,e,i){void 0===i&&(i=null),this._listener=t,this._ctx=e,this._s_default.state_init(this,e),this._states_init(e)},i.prototype._states_init=function(t){},i.prototype.get_state_by_enum=function(t){return null},i.prototype.state_change=function(t,e){void 0===e&&(e=null);var i=this.get_state_by_enum(t);i||console.log("invalid game machine enum "+t);var r=this._current_state;this._current_state=i,this._listener.sm_state_changed(r,i,e),r.state_leave(i,e),i.state_enter(r,e)},i.prototype.machine_update=function(){this._current_state.state_update()},i}(t.sirius_base_object);t.GP_StateMachine=e,__reflect(e.prototype,"ns_sirius.GP_StateMachine")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(){this.target=null,this.fun=null}return t}();__reflect(e.prototype,"NFC_signature");var i=function(){function t(){this._dic=Object.create(null)}return t.prototype.exists=function(t,e,i){var r=this._dic[t];if(!r)return!1;for(var s=r.length,n=0;s>n;n++){var o=r[n];if(o.target===e&&o.fun===i)return!0}return!1},t.prototype.add=function(t,i,r){if(!this.exists(t,i,r)){var s=this._dic[t];s||(this._dic[t]=[],s=this._dic[t]);var n=new e;n.target=i,n.fun=r,s.push(n)}},t.prototype.add_once=function(t,e,i){this.add(t,e,i)},t.prototype.remove=function(t,e){var i=this._dic[t];if(i)for(var r=i.length,s=0;r>s;s++){var n=i[s];if(n.target===e){i.splice(s,1),n.fun=null,n.target=null;break}}},t.prototype.remove_target=function(t){for(var e in this._dic){var i=this._dic[e];if(i)for(var r=i.length,s=0;r>s;s++){var n=i[s];n&&n.target===t&&(i.splice(s,1),n.fun=null,n.target=null)}}},t.prototype.debug_info=function(t){var e=this._dic[t],i=e.length;console.log(i)},t.prototype.post=function(t,e){void 0===e&&(e=void 0);var i=this._dic[t];if(i)for(var r=i.length,s=0;r>s;s++){var n=i[s];n&&n.fun.apply(n.target,[e])}},t.prototype.post_and_remove_global=function(t,e){void 0===e&&(e=void 0);var i=this._dic[t];if(i){for(var r=i.length,s=0;r>s;s++){var n=i[s];n&&(n.fun.apply(n.target,[e]),n.fun=null,n.target=null)}this._dic[t]=null}},t}();t.NFC=i,__reflect(i.prototype,"ns_sirius.NFC")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.throw_error=function(t){throw console.error(t),t},t.prototype.error=function(t){console.error(t)},t.prototype.throw_error_too_strict=function(t){console.log(t)},t.prototype.sh_exception=function(t){console.log("sh:> "+t)},t}();t.sirius_log=e,__reflect(e.prototype,"ns_sirius.sirius_log")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.establish_reflection_table(),e}return __extends(e,t),e.prototype.establish_reflection_table=function(){this._rtable=common_rtable;for(var t=this._rtable.length,e=0;t>e;e++)this._rtable[e].index=e},e.prototype.register_sm=function(t,e){this._sm_1=t,this._sm_2=e},e.prototype._choose_sm=function(t){return 1===t?this._sm_2:this._sm_1},e.prototype.show_module=function(t,e,i,r,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=0),void 0===s&&(s=null);var n=this._find_module_by_name(t);if(!n)return void console.error("不存在模块 ： "+t);var o=new n.vm;o.register_module_key(n.module_name),o.register_layer_index(r);var _=new n.view;return this._choose_sm(r).show_module(_,o,e,i,s),_},e.prototype.remove_all_modules=function(t){this._choose_sm(t).clear_all()},e.prototype.remove_module=function(t,e){this._choose_sm(e).remove_module(t)},e.prototype.remove_module_by_key=function(t,e){this._choose_sm(e).remove_module_by_key(t)},e.prototype.pop_top_module=function(t){this._choose_sm(t).pop_top()},e.prototype.module_count=function(t){return this._choose_sm(t).module_count()},e.prototype.get_top_module=function(t){return this._choose_sm(t).top_module()},e.prototype._find_module_by_name=function(t){if(!this._rtable)return null;for(var e=this._rtable.length,i=0;e>i;i++){var r=this._rtable[i];if(r.module_name==t)return r}return null},e.prototype.module_manual_init=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var s=this._find_module_by_name(t);if(!s)return void console.error("不存在模块 ： "+t);var n=new s.vm;n.register_module_key(s.module_name);var o=new s.view;return this._sub_module_init(o,n,e,i),o},e.prototype._sub_module_init=function(t,e,i,r){void 0===i&&(i=null),void 0===r&&(r=null),e.vm_pre_init(r,t,this._sirius),t.view_pre_init(i,e,this._sirius),t.view_init(),e.vm_init()},e}(t.sirius_element_module);t.module_marshal=e,__reflect(e.prototype,"ns_sirius.module_marshal")}(ns_sirius||(ns_sirius={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,r){function s(t){e.call(r,t)}function n(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(r))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(r,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var _=t.split("/");_.pop();var a=_.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(r,generateJSON.paths[t])},this):RES.getResByUrl(a,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(r,generateJSON.paths[t])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ARE_PropertyType;!function(t){t[t["null"]=0]="null",t[t["boolean"]=1]="boolean",t[t.integer=2]="integer",t[t["float"]=3]="float",t[t.string=4]="string",t[t.array=5]="array",t[t.object=6]="object"}(ARE_PropertyType||(ARE_PropertyType={}));var ARE_PropertyPostPolicy;!function(t){t[t.no_same=0]="no_same",t[t.always=1]="always"}(ARE_PropertyPostPolicy||(ARE_PropertyPostPolicy={}));var ARE_MD=function(){function t(){}return t}();__reflect(ARE_MD.prototype,"ARE_MD");var AutomaticReflectEntityProperty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init_by_md=function(t){this.p_name=t.p_name,this.json_path=t.json_path,this.p_type=t.p_type,this.p_value=null,void 0===t.post_policy?this.post_policy=ARE_PropertyPostPolicy.no_same:this.post_policy=t.post_policy,this.set_default_value(this.p_type)},e.prototype.reflect_from_json=function(t){var e=this._reflect_json_value(this.json_path,t);void 0!==e&&this.change_value_directly(e)},e.prototype.change_value_directly=function(t){var e=this.p_value;this.set_property(this.p_type,t),this.post_policy==ARE_PropertyPostPolicy.no_same?e!=this.p_value&&this._post_property_changed():this._post_property_changed()},e.prototype._post_property_changed=function(){var t=this.p_name+"Changed";sirius.nfc.post(t)},e.prototype.set_property=function(t,e){switch(t){case ARE_PropertyType["null"]:this.p_value=null;break;case ARE_PropertyType["boolean"]:"boolean"==typeof e?this.p_value=e:"string"==typeof e?this.p_value="true"===e?!0:!1:"number"==typeof e?this.p_value=1===e:this.p_value=!1;break;case ARE_PropertyType.string:this.p_value=e;break;case ARE_PropertyType.integer:this.p_value=parseInt(e);break;case ARE_PropertyType["float"]:this.p_value=parseFloat(e);break;case ARE_PropertyType.array:this.p_value=e;break;case ARE_PropertyType.object:this.p_value=e}},e.prototype.set_default_value=function(t){switch(t){case ARE_PropertyType["null"]:this.p_value=null;break;case ARE_PropertyType["boolean"]:this.p_value=!1;break;case ARE_PropertyType.string:this.p_value="";break;case ARE_PropertyType.integer:this.p_value=0;break;case ARE_PropertyType["float"]:this.p_value=0;break;case ARE_PropertyType.array:this.p_value=null;break;case ARE_PropertyType.object:this.p_value=null}},e.prototype._reflect_json_value=function(t,e){for(var i=e,r=0;r<t.length;r++){var s=t[r],n=i[s];if(void 0===n||null===n)return;if(r===this.json_path.length-1)return n;i=n}},e}(ARE_MD);__reflect(AutomaticReflectEntityProperty.prototype,"AutomaticReflectEntityProperty");var ns_sirius;!function(t){var e=function(){function t(){this._generate_pps()}return t.prototype.destroy=function(){console.log("ENTITY : [ "+this.constructor.name+" ] destroy"),this._pps=null,this._deconstructor()},t.prototype._deconstructor=function(){},t.prototype._generate_pps=function(){var t=this,e=this._get_md();if(!e||0==e.length)return void sirius.log.throw_error("应当定义属性列表");this._pps=new Array;for(var i=function(i){var s=new AutomaticReflectEntityProperty;
r._pps.push(s),s.init_by_md(e[i]),r._property_inited(s);var n=s.p_name;Object.defineProperty(t,n,{get:function(){return t._pps[i].p_value},set:function(e){var r=t._pre_modification(t._pps[i],e);e=void 0===r?e:r,t._pps[i].change_value_directly(e),t._post_modification(t._pps[i],e)}})},r=this,s=0;s<e.length;s++)i(s)},t.prototype.update_automatic_pps=function(t){if(null!=t&&void 0!=t)for(var e=0;e<this._pps.length;e++)this._pps[e].reflect_from_json(t)},t.prototype._property_inited=function(t){},t.prototype._pre_modification=function(t,e){},t.prototype._post_modification=function(t,e){},t.prototype.serialization=function(){for(var t={},e=this._pps.length,i=0;e>i;i++){var r=this._pps[i];t[r.p_name]=r.p_value}return JSON.stringify(t)},t}();t.AutomaticReflectEntity=e,__reflect(e.prototype,"ns_sirius.AutomaticReflectEntity")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.mark_as_fullfill(),e.touchEnabled=!1,e.touchChildren=!0,e.touchThrough=!0,e}return __extends(e,t),e}(t.sirius_view_base);t.sirius_root_layer=e,__reflect(e.prototype,"ns_sirius.sirius_root_layer");var i=function(i){function r(){return i.call(this)||this}return __extends(r,i),r.prototype.view_hierarchy_establish=function(e){this._app_root_view=e;var i=t.app_layer_def,r=i.length;this.sms=new Array(r);for(var s=0;r>s;s++){var n=i[s],o=this._create_layer_by_def(n);this.sms[s]=o}},r.prototype._create_layer_by_def=function(i){var r=new e;this._app_root_view.addChild(r),r.update_visible(!1),i.disable_touch&&(r.touchEnabled=!1);var s=null;return s=i.exclusive?new t.layer_exclusive_manager:1==i.sm_type?new t.layer_module_sm:new t.layer_view_sm,s.manager_init(r,i.lid,this._sirius),s},r}(t.sirius_element_module);t.layer_partition=i,__reflect(i.prototype,"ns_sirius.layer_partition")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._is_visible=!1,e}return __extends(e,t),e.prototype.manager_init=function(t,e,i){this._root_view=t,this.layer_id=e,this._sirius=i},e.prototype.get_root_view=function(){return this._root_view},e.prototype.attach_target_view=function(t){this._target_view=t},e.prototype.show=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),this._is_visible=!0,this._root_view.addChild(this._target_view),this._target_view.attached_to_display_tree(t),this._update_container_visible(),this._target_view},e.prototype.hide=function(){this._is_visible=!1,this._target_view&&(this._target_view.detaching_from_display_tree(),this._target_view.remove_from_parent()),this._update_container_visible()},e.prototype.clear_all=function(){this.hide()},e.prototype._update_container_visible=function(){this._root_view.update_visible(this._is_visible)},e}(t.sirius_base_object);t.layer_exclusive_manager=e,__reflect(e.prototype,"ns_sirius.layer_exclusive_manager",["ns_sirius.Isirius_layer_manager"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._destroy_module=function(t){var e=t.pair_view;e.detaching_from_display_tree(),e.destroy(),t.destroy()},e.prototype.show_module=function(t,e,i,r,s){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===s&&(s=null),this._root_view.addChild(t),t.attached_to_display_tree(i),e.vm_pre_init(r,t,this._sirius),t.view_pre_init(i,e,this._sirius),t.view_init(),e.vm_init(),this._s_push(e),this._update_container_visible(),t},e.prototype.clear_all=function(){if(!this._s_is_empty()){for(var t=0;t<=this._top;t++){var e=this._mstack[t];this._destroy_module(e)}this._s_clear(),this._update_container_visible()}},e.prototype.pop_top=function(){return this._s_is_empty()?void console.log("模块栈已经为空了"):(this._destroy_module(this._s_top()),this._s_pop(),this._update_container_visible(),void this._post_top_module_update())},e.prototype.shift_first=function(){return this._s_is_empty()?void console.log("模块栈已经为空了"):(this._destroy_module(this._s_bottom()),this._s_shift(),void this._update_container_visible())},e.prototype.remove_module=function(t){var e=this._mstack.indexOf(t);return 0>e?void this._sirius.sirius_public.log.throw_error("尝试移除不存在的模块"):(this._destroy_module(t),this._s_remove(e),this._update_container_visible(),void this._post_top_module_update())},e.prototype.is_empty=function(){return this._s_is_empty()},e.prototype.bring_view_to_top=function(t){var e=this._root_view.getChildIndex(t);0>e||this._root_view.addChild(t)},e.prototype.remove_module_by_key=function(t){var e=this._find_module_by_key(t);e&&this.remove_module(e)},e.prototype._find_module_by_key=function(t){if(this._s_is_empty())return null;for(var e=0;e<=this._top;e++){var i=this._mstack[e];if(i.mkey===t)return i}return null},e.prototype.top_module=function(){return this._mstack[this._top]},e.prototype.module_count=function(){return this._top+1},e.prototype._post_top_module_update=function(){if(!this._s_is_empty()){var t=this.top_module();t.update_when_hierarchy_changed&&t.update_when_hierarchy_changed()}},e}(t.layer_stack_manager);t.layer_module_sm=e,__reflect(e.prototype,"ns_sirius.layer_module_sm")}(ns_sirius||(ns_sirius={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function r(r){e.call(i,r,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?r(s):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ns_sirius;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype._destroy_view=function(t){t.detaching_from_display_tree(null),t.destroy()},i.prototype.show_view=function(e,i,r){return void 0===i&&(i=null),void 0===r&&(r=null),this._root_view.addChild(e),e instanceof t.sirius_view_base?e.attached_to_display_tree(i):(e.view_pre_init(i,null,this._sirius),e.view_init()),this._s_push(e),this._update_container_visible(),e},i.prototype.clear_all=function(){if(!this._s_is_empty()){for(var t=0;t<=this._top;t++){var e=this._mstack[t];this._destroy_view(e)}this._s_clear(),this._update_container_visible()}},i.prototype.pop_top=function(){return this._s_is_empty()?void console.log("视图栈已经为空了"):(this._destroy_view(this._s_top()),this._s_pop(),void this._update_container_visible())},i.prototype.shift_first=function(){return this._s_is_empty()?void console.log("视图栈已经为空了"):(this._destroy_view(this._s_bottom()),this._s_shift(),void this._update_container_visible())},i.prototype.remove_view=function(t){var e=this._mstack.indexOf(t);return 0>e?void this._sirius.sirius_public.log.throw_error("尝试移除不存在的视图"):(this._destroy_view(t),this._s_remove(e),void this._update_container_visible())},i.prototype.is_empty=function(){return this._s_is_empty()},i.prototype.bring_view_to_top=function(t){var e=this._root_view.getChildIndex(t);0>e||this._root_view.addChild(t)},i}(t.layer_stack_manager);t.layer_view_sm=e,__reflect(e.prototype,"ns_sirius.layer_view_sm")}(ns_sirius||(ns_sirius={}));var sirius,release_config;ns_sirius.egret_enhance();var Main=function(t){function e(){var e=t.call(this)||this;return release_config=new AppReleaseConfig,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadConfig("resource/common/COMMON.res.json","resource/")];case 2:return i.sent(),[4,this.loadTheme()];case 3:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 4:return i.sent(),[4,RES.loadGroup("COMMON",0,t)];case 5:return i.sent(),[4,RES.loadGroup("COMMON_CONFIG",0,t)];case 6:return i.sent(),this.stage.removeChild(t),[3,8];case 7:return e=i.sent(),console.error(e),[3,8];case 8:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var r=new eui.Theme("resource/default.thm.json",t.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){var t=new ns_sirius.SiriusCore;t.core_init(),sirius=t.sirius_public,this._syn_stage_size(),sirius.device_info.device_info_init(),sirius.view_manager.view_hierarchy_establish(this),sirius.view_manager.show_module("Test")},e.prototype._syn_stage_size=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;sirius.device_info.syn_stage_size(t,e)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.onButtonClick=function(t){var e=RES.getRes("slot_stage_json");console.log(e)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var egret_view_no_touch=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!0,e.touchThrough=!0,e}return __extends(e,t),e}(eui.Group);__reflect(egret_view_no_touch.prototype,"egret_view_no_touch");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var ns_sirius;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.mm=new t.module_marshal,i.layes=new t.layer_partition,i.sirius_public=new t.SiriusPublic,i}return __extends(i,e),i.prototype.core_init=function(){this.mm.core_init(this),this.layes.core_init(this),this.sirius_public.core_init(this)},i}(t.sirius_base_object);t.SiriusCore=e,__reflect(e.prototype,"ns_sirius.SiriusCore")}(ns_sirius||(ns_sirius={}));var egret_comps;!function(t){var e=function(){function t(){this.scale_x=1,this.scale_y=1,this.scale=1}return t}();t.sync_mc_display_param=e,__reflect(e.prototype,"egret_comps.sync_mc_display_param");var i=function(t){function e(){var e=t.call(this)||this;return e._complete_callback=null,e}return __extends(e,t),e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this._mc&&this.removeChild(this._mc),this._mc_data=null,this._mc_texture=null,this._param=null},e.prototype.load=function(t,e,i){this._mc_data=RES.getRes(t),this._mc_texture=RES.getRes(e),this._param=i,this._create_mc()},e.prototype.play=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1),this.visible=!0,this._complete_callback=t,this._mc.gotoAndPlay(e,i)},e.prototype._create_mc=function(){var t=this,e=new egret.MovieClipDataFactory(this._mc_data,this._mc_texture),i=new egret.MovieClip(e.generateMovieClipData("car_explosion"));this.addChild(i),i.scaleX=this._param.scale,i.scaleY=this._param.scale,this._mc=i,this.visible=!1,i.addEventListener(egret.Event.COMPLETE,function(e){t._complete_callback&&t._complete_callback(),t.visible=!1},this)},e}(egret.DisplayObjectContainer);t.sync_mc_display=i,__reflect(i.prototype,"egret_comps.sync_mc_display",["ns_sirius.Ipool_obj","ns_sirius.Isirius_base_object"])}(egret_comps||(egret_comps={}));var awt_network;!function(t){function e(t){var e="";switch(t){case 16:e="Your account is logged in elsewhere.";break;case 25:e="Cannot enter this level."}return e}function i(t){var e=!1;switch(t){case 16:e=!0}return e}t.error_str=e,t.is_fundamental=i}(awt_network||(awt_network={}));var ns_sirius;!function(t){var e=function(){function t(){}return t}();t.sirius_network_consts=e,__reflect(e.prototype,"ns_sirius.sirius_network_consts"),t.sirius_network_consts_debug={protocol:"http",host_address:"47.102.112.216:7004/game"},t.sirius_network_consts_release={protocol:"https",host_address:"awtserver.plusfuns.com/game"}}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(){this.parse_json=!0,this.disable_loading=!1,this.disable_user_update=!1}return t.prototype.copy_param=function(t){void 0!=t.parse_json&&(this.parse_json=t.parse_json),void 0!=t.disable_loading&&(this.disable_loading=t.disable_loading),void 0!=t.disable_user_update&&(this.disable_user_update=t.disable_user_update)},t}();t.common_req_param=e,__reflect(e.prototype,"ns_sirius.common_req_param");var i=function(i){function r(t){void 0===t&&(t=null);var r=i.call(this)||this;return r._req_param=null,r._req_param=new e,r._weak_context=null,r._cb_s=null,r._cb_f=null,t&&r._req_param.copy_param(t),r}return __extends(r,i),r.prototype._before_destroy=function(){this._weak_context=null,this._req_param=null,this._cb_s=null,this._cb_f=null},r.prototype._display_server_error=function(t){if(!(void 0===t||null===t||isNaN(t)||0>=t)){var e=awt_network.error_str(t);if(e){var i=awt_network.is_fundamental(t);sirius.view_manager.show_alert_d(e,null,null,{hide_confirm:i})}}},r.prototype._handle_error_code=function(t){this._display_server_error(t),this._callback_internal(this._cb_f,t),this.destroy()},r.prototype._handle_fail=function(t){this._callback_internal(this._cb_f,t),this.destroy()},r.prototype._handle_success=function(t){this._update_global_update(t),this._callback_internal(this._cb_s,t),this.destroy()},r.prototype._update_global_update=function(t){!this._req_param.disable_user_update,this._validate_map_info(t)},r.prototype._validate_map_info=function(t){t&&t.v&&!t.v.info},r.prototype.generate_expire=function(){this._expire_dis=new t.DelayDispatcher,this._expire_dis.dispatch(2e4,this,this.handle_req_expired)},r.prototype.handle_req_expired=function(){this._disable_loading(),this._handle_fail("expire")},r.prototype.clear_expire=function(){this._expire_dis&&(this._expire_dis.destroy(),this._expire_dis=null)},r.prototype._combine_url=function(e){var i=null;i=release_config.for_release?t.sirius_network_consts_release:t.sirius_network_consts_debug;var r=i.protocol+"://"+i.host_address+"/"+e;return r},r.prototype.get_fullurl=function(t,e){return void 0===e&&(e=void 0),__awaiter(this,void 0,void 0,function(){var i,r=this;return __generator(this,function(s){return t?(i=JSON.stringify(e),this._url_str=t,[2,new Promise(function(t,e){r._cb_s=t,r._cb_f=e,r._send_get(r._url_str)})]):[2,new Promise(function(t,e){e("url_error")})]})})},r.prototype.post_fullurl=function(t,e){return void 0===e&&(e=void 0),__awaiter(this,void 0,void 0,function(){var i,r=this;return __generator(this,function(s){return t?(i=JSON.stringify(e),this._url_str=t,[2,new Promise(function(t,e){r._cb_s=t,r._cb_f=e,r._send_post(r._url_str,i)})]):[2,new Promise(function(t,e){e("url_error")})]})})},r.prototype.post=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var r,s=this;return __generator(this,function(n){return t?(this._weak_context=i,r=JSON.stringify(e),this._url_str=this._combine_url(t),this._url_relative=t,[2,new Promise(function(t,e){s._cb_s=t,s._cb_f=e,s._send_post(s._url_str,r)})]):[2,new Promise(function(t,e){e("url_error")})]})})},r.prototype._send_get=function(t){this.generate_expire();var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open(t,egret.HttpMethod.GET),e.send(),e.addEventListener(egret.Event.COMPLETE,this.comp,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.fail,this)},r.prototype._send_post=function(t,e){this._enable_loading(),this.generate_expire();var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.POST),i.setRequestHeader("Content-Type","application/json"),e?i.send(e):i.send(),i.addEventListener(egret.Event.COMPLETE,this.comp,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.fail,this)},r.prototype.comp=function(t){if(this._disable_loading(),!this._is_destroyed){this.clear_expire();var e=(this._url_str,t.currentTarget),i=e.response;if(this._req_param.parse_json){var r=JSON.parse(i);if(r.m){var s=parseInt(r.m);this._handle_error_code(s)}else r.v?this._handle_success(r):this._handle_fail(r)}else this._handle_success(i)}},r.prototype.fail=function(t){if(this._disable_loading(),!this._is_destroyed){this.clear_expire();var e=t.currentTarget,i=e.response;this._handle_fail(i)}},r.prototype._callback_internal=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t)if(this._weak_context){if(this._weak_context._is_destroyed===!0)return;t.apply(void 0,e)}else t.apply(void 0,e)},r.prototype._enable_loading=function(){this._req_param&&this._req_param.disable_loading||sirius.view_manager.switch_global_loading(!0)},r.prototype._disable_loading=function(){this._req_param&&this._req_param.disable_loading||sirius.view_manager.switch_global_loading(!1)},r}(t.sirius_base_object);t.common_req=i,__reflect(i.prototype,"ns_sirius.common_req")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(){}return t.prototype.clear=function(){egret.localStorage.clear()},t.prototype.get_item=function(t,e){var i=egret.localStorage.getItem(t);return this._reflect(e,i)},t.prototype.set_item=function(t,e,i){var r=this._serialization(e,i);egret.localStorage.setItem(t,r)},t.prototype.delete_item=function(t){egret.localStorage.removeItem(t)},t.prototype._reflect=function(t,e){var i=null;switch(t){case sirius_internal_type["null"]:i=null;break;case sirius_internal_type["boolean"]:i="true"===e?!0:!1;break;case sirius_internal_type.string:i=e;break;case sirius_internal_type.integer:i=parseInt(e);break;case sirius_internal_type["float"]:i=parseFloat(e);break;case sirius_internal_type.array:i=JSON.parse(e);break;case sirius_internal_type.object:i=JSON.parse(e)}return i},t.prototype._serialization=function(t,e){var i=null;switch(t){case sirius_internal_type["null"]:i=null;break;case sirius_internal_type["boolean"]:i=e?"true":"false";break;case sirius_internal_type.string:i=e;break;case sirius_internal_type.integer:i=e+"";break;case sirius_internal_type["float"]:i=e+"";break;case sirius_internal_type.array:i=JSON.stringify(e);break;case sirius_internal_type.object:i=JSON.stringify(e)}return i},t}();t.sirius_web_serialization=e,__reflect(e.prototype,"ns_sirius.sirius_web_serialization",["ns_sirius.Iweb_serialization"])}(ns_sirius||(ns_sirius={}));var ns_sirius_egret;!function(t){var e=function(){function t(t){this.timer=t,this._is_destroyed=!1}return Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock=t},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._is_destroyed=!0,ns_sirius.timer_clock.remove(this),this.timer=null},t.prototype.launch=function(){ns_sirius.timer_clock.add(this)},t.prototype.update=function(t){this.timer&&this.timer.update()},t}();__reflect(e.prototype,"JSTimerRealActuator",["ns_sirius.IAnimatable"]);var i=function(){function t(){this._is_destroyed=!1,this._actuator=new e(this),this._actuator.launch(),this._is_running=!1,this._is_paused=!1,this._end_interval=0}return Object.defineProperty(t.prototype,"is_running",{get:function(){return this._is_running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_paused",{get:function(){return this._is_paused},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._actuator&&(this._actuator.destroy(),this._actuator=null),this._listener=null,this._is_destroyed=!0,this._user_param=null},t.prototype.timer_init_1=function(t,e,i,r){return void 0===r&&(r=null),this._listener=t,this._interval=e,this._interval<16&&(this._interval=16),this._end_interval=i,this._user_param=r,this},t.prototype._check_time_when_start=function(){return this._end_interval<=0?(this._is_running=!1,this._post_finish(1),!0):!1},t.prototype.start=function(t){return this._check_time_when_start()?this:(this._start_time=(new Date).getTime(),this._is_running=!0,this._is_paused=!1,this._t_generate(t),this)},t.prototype.stop=function(){this._is_running=!1,this._is_paused=!0,this._post_finish(2)},t.prototype.resume=function(t){return this._is_running?(this._is_paused=!1,void this._t_generate(t)):void console.log("timer 已经停止了")},t.prototype.pause=function(){return this._is_running?void(this._is_paused=!0):void console.log("timer 已经停止了")},t.prototype._t_generate=function(t){this._previous_time=(new Date).getTime(),t&&this.update()},t.prototype.update=function(){if(!this._is_destroyed&&this._is_running&&!this._is_paused){var t=16,e=(new Date).getTime(),i=e-this._previous_time,r=e-this._start_time;i>this._interval-t&&(this._previous_time=(new Date).getTime(),this._post_tick(r)),r>this._end_interval-t&&(this._is_running=!1,this._post_finish(1))}},t.prototype._post_tick=function(t){this._listener.on_timer_tick(t,this._user_param)},t.prototype._post_finish=function(t){this._listener.on_timer_finish(t,this._user_param)},t}();t.egret_timer_real_time=i,__reflect(i.prototype,"ns_sirius_egret.egret_timer_real_time")}(ns_sirius_egret||(ns_sirius_egret={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.mark_as_fullfill(),e.set_bg_color(0,.4),e}return __extends(e,t),e.prototype.start_anim=function(){},e.prototype.stop_anim=function(){},e}(t.sirius_view_base);t.sirius_default_loading_view=e,__reflect(e.prototype,"ns_sirius.sirius_default_loading_view")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(e){var i,r=t.call(this)||this;return i=e?r.set_bg_color(16646144,.4):r.set_bg_color(0,.4),i.ellipseWidth=40,i.ellipseHeight=40,r.left=20,r.right=20,r.height=40,r.verticalCenter=100,r._txt=new eui.Label,r.addChild(r._txt),r._txt.textColor=16777215,r._txt.left=10,r._txt.right=10,r._txt.size=26,r._txt.percentHeight=100,r._txt.textAlign=egret.HorizontalAlign.CENTER,r._txt.verticalAlign=egret.VerticalAlign.MIDDLE,r}return __extends(e,t),e.prototype.show=function(t){this._txt.text=t,egret.Tween.get(this).to({verticalCenter:0},2e3,egret.Ease.cubicOut).to({alpha:0},1e3,egret.Ease.cubicOut)},e}(t.sirius_view_base);t.popup_text_msg=e,__reflect(e.prototype,"ns_sirius.popup_text_msg")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){function e(t,e){for(var i=Object.keys(t),r=i.length,s=0;r>s;s++){var n=i[s],o=t[n],_=e(o);if(_===!0)break}}function i(t,e){for(var i=Object.keys(t),r=i.length,s=0;r>s;s++){var n=i[s],o=t[n],_=e(n,o);if(_===!0)break}}function r(t,e){var i=t.indexOf(e);0>i||t.splice(i,1)}function s(t,e){var i=Math.floor(Math.random()*(e-t))+t;return i}function n(t,e){var i=1e3*t,r=1e3*e,s=Math.floor(Math.random()*(r-i))+i;return s/=1e3}t.loop_values=e,t.loop_pps=i,t.arr_robj=r,t.random_region=s,t.random_region_float=n}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.prototype.copy_from=function(t){this.width=t.width,this.height=t.height},t}();t.Size=e,__reflect(e.prototype,"ns_sirius.Size")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"fs_cover_sm",{get:function(){return this._fs_cover_sm},enumerable:!0,configurable:!0}),i.prototype.view_hierarchy_establish=function(e){this._sirius.layes.view_hierarchy_establish(e),this._module_sm_1=this._sirius.layes.sms[0],this._module_sm_2=this._sirius.layes.sms[1],this._global_anim_sm=this._sirius.layes.sms[2],this._alert_sm=this._sirius.layes.sms[3],this._fs_cover_sm=this._sirius.layes.sms[4],this._message_sm=this._sirius.layes.sms[5],this._loading_sm=this._sirius.layes.sms[6],this._global_loading_view=new t.mwn_loading_view,this._loading_sm.attach_target_view(this._global_loading_view),this._sirius.mm.register_sm(this._module_sm_1,this._module_sm_2)},i.prototype.module_manual_destroy=function(t){var e=t.pair_view;e.detaching_from_display_tree(),e.destroy(),t.destroy()},i.prototype.module_manual_init=function(t,e,i,r){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this._sirius.mm.module_manual_init(t,e,i,r)},i.prototype.show_module=function(t,e,i,r,s){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=0),void 0===s&&(s=null),this._sirius.mm.show_module(t,e,i,r,s)},i.prototype.remove_all_modules=function(t){void 0===t&&(t=0),this._sirius.mm.remove_all_modules(t)},i.prototype.remove_module=function(t,e){void 0===e&&(e=0),this._sirius.mm.remove_module(t,e)},i.prototype.remove_module_by_key=function(t,e){void 0===e&&(e=0),this._sirius.mm.remove_module_by_key(t,e)},i.prototype.pop_top_module=function(t){void 0===t&&(t=0),this._sirius.mm.pop_top_module(t)},i.prototype.module_count=function(t){return void 0===t&&(t=0),this._sirius.mm.module_count(t)},i.prototype.get_top_module=function(t){return void 0===t&&(t=0),this._sirius.mm.get_top_module(t)},i.prototype.show_fsv=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this._fs_cover_sm.show_view(t,e,i)},i.prototype.clear_fsv=function(){this._fs_cover_sm.clear_all()},i.prototype.remove_fsv=function(t){this._fs_cover_sm.remove_view(t)},i.prototype.switch_global_loading=function(t){this._global_loading_view&&(t?(this._loading_sm.show(),this._global_loading_view.start_anim()):(this._global_loading_view.stop_anim(),this._loading_sm.hide()))},i.prototype.show_popup_text_msg=function(t){release_config.for_release||this.show_popup_text_msg_release(t,!0)},i.prototype.show_popup_text_msg_release=function(e,i){var r=this;void 0===i&&(i=!1);var s=!1;release_config.for_release||(s=i?!0:!1);var n=new t.popup_text_msg(s);this._message_sm.show_view(n),n.show(e),setTimeout(function(){r._message_sm.shift_first()},3500)},i.prototype.show_anim_view=function(t){this._global_anim_sm.clear_all(),this._global_anim_sm.attach_target_view(t),this._global_anim_sm.show()},i.prototype.clear_anim_view=function(){this._global_anim_sm.clear_all()},i.prototype.show_alert=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this._alert_sm.show_view(t,e,i)},i.prototype.clear_alert=function(){this._alert_sm.clear_all()},i.prototype.show_alert_d=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.show_alert((new default_alert_view).show(t,e,i,r),r)},i.prototype.show_network_fail_alert=function(t){this.show_alert((new default_alert_view).show("network_fail",t,null,null),null)},i.prototype.show_network_fail_alert_cancel=function(t,e){this.show_alert((new default_alert_view).show("network_fail",t,e,null),null)},i}(t.sirius_element_module);t.app_vh_manager=e,__reflect(e.prototype,"ns_sirius.app_vh_manager")}(ns_sirius||(ns_sirius={}));var AppReleaseConfig=function(){function t(){this.for_release=!1}return t}();__reflect(AppReleaseConfig.prototype,"AppReleaseConfig");var default_confirm_btn=function(t){function e(){var e=t.call(this)||this,i=new eui.Image;i.percentWidth=100,i.percentHeight=100,i.verticalCenter=0,i.horizontalCenter=0,i.source="Button_Red_png",e.addChild(i);var r=new eui.Label;return r.verticalCenter=0,r.horizontalCenter=0,r.size=18,r.textColor=16777215,r.textAlign=egret.HorizontalAlign.CENTER,r.verticalAlign=egret.VerticalAlign.MIDDLE,r.text="confirm",e.addChild(r),e.lbl=r,e}return __extends(e,t),e.prototype.change_txt=function(t){this.lbl.text=t},e}(eui.Group);__reflect(default_confirm_btn.prototype,"default_confirm_btn");var default_cancel_btn=function(t){function e(){var e=t.call(this)||this,i=new eui.Image;i.percentWidth=100,i.percentHeight=100,i.verticalCenter=0,i.horizontalCenter=0,i.source="Button_Ochre_png",e.addChild(i);var r=new eui.Label;return r.verticalCenter=0,r.horizontalCenter=0,r.size=18,r.textColor=16777215,r.textAlign=egret.HorizontalAlign.CENTER,r.verticalAlign=egret.VerticalAlign.MIDDLE,r.text="cancel",e.addChild(r),e}return __extends(e,t),e}(eui.Group);__reflect(default_cancel_btn.prototype,"default_cancel_btn");var default_alert_view=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.percentHeight=100,e._init(),e}return __extends(e,t),e.prototype._view_before_destroy=function(){this._cancel_callback=null,this._confirm_callback=null},e.prototype._init=function(){this._cont_container=new eui.Group,this._cont_container.width=610,this.addChild(this._cont_container),this._cont_container.minHeight=262,this._cont_container.horizontalCenter=0,this._cont_container.verticalCenter=0;var t=new eui.Image;this._cont_container.addChild(t),t.percentWidth=100,t.percentHeight=100,t.horizontalCenter=0,t.verticalCenter=0,t.scale9Grid=new egret.Rectangle(90,90,30,30),t.source="Common_Panel_Comfirm_png";var e=new eui.Image;this._cont_container.addChild(e),e.width=194,e.height=11,e.horizontalCenter=0,e.top=25,e.source="Common_Pic_Line_01_png",this._info=new eui.Label,this._info.width=440,this._info.horizontalCenter=0,this._info.top=75,this._info.size=18,this._info.textColor=7755857,this._info.textAlign=egret.HorizontalAlign.CENTER,this._cont_container.addChild(this._info);var i=new default_confirm_btn;this._btn_confirm=i,i.width=184,i.height=42,i.bottom=30,i.horizontalCenter=0,this._cont_container.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this._handle_confirm,this)},e.prototype._update_confirm_and_cancel_btn=function(){if(this._cancel_callback){this._btn_confirm.horizontalCenter=120;var t=new default_cancel_btn;this._btn_cancel=t,t.width=184,t.height=42,t.bottom=30,t.horizontalCenter=-120,this._cont_container.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this._handle_cancel,this)}},e.prototype._handle_cancel=function(){this._cancel_callback&&this._cancel_callback(),sirius.view_manager.clear_alert()},e.prototype._handle_confirm=function(){this._confirm_callback&&this._confirm_callback(),sirius.view_manager.clear_alert()},e.prototype.show=function(t,e,i,r){return void 0===r&&(r=null),this._confirm_callback=e,this._cancel_callback=i,this._update_confirm_and_cancel_btn(),r&&r.hide_confirm&&(this._btn_confirm.visible=!1),r&&1==r.align&&(this._info.textAlign=egret.HorizontalAlign.LEFT),this._info.text=t,this._cal_height(),this},e.prototype._cal_height=function(){var t=this;setTimeout(function(){t._cont_container.height=t._info.height+210},0)},e}(ns_sirius.sirius_view_base);__reflect(default_alert_view.prototype,"default_alert_view");var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.mark_as_fullfill(),e.set_bg_color(0,.4);var i=new eui.Rect;return e.addChild(i),i.fillColor=16777215*Math.random(),i.percentWidth=60,i.percentHeight=60,e}return __extends(e,t),e.prototype.start_anim=function(){this.visible=!0},e.prototype.stop_anim=function(){this.visible=!1},e}(t.sirius_view_base);t.mwn_loading_view=e,__reflect(e.prototype,"ns_sirius.mwn_loading_view")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){t.app_layer_def=[{lid:"modules1",index:0,exclusive:!1,sm_type:1},{lid:"modules2",index:1,exclusive:!1,sm_type:1},{lid:"global_anim",index:2,exclusive:!0},{lid:"alert_panel",index:3,exclusive:!1,sm_type:0},{lid:"fullscreen_cover",index:4,exclusive:!1,sm_type:0},{lid:"messages",index:5,exclusive:!1,sm_type:0,disable_touch:!0},{lid:"loading",index:6,exclusive:!0}]}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.view_manager=new t.app_vh_manager,i.device_info=new t.sirius_device_info,i.log=new t.sirius_log,i.nfc=new t.NFC,i.storage=new t.sirius_web_serialization,i
}return __extends(i,e),i.prototype.core_init=function(t){this._sirius=t,this.view_manager.core_init(t)},i.prototype.debug_foo=function(){this.view_manager.show_popup_text_msg("You are connected to the sirius hierarchy.")},i}(t.sirius_element_module);t.SiriusPublic=e,__reflect(e.prototype,"ns_sirius.SiriusPublic")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(){this._animatebles=new Array,this._timeScale=1}return t.frame_to_ms=function(t){return Math.round(1e3*t/60)},Object.defineProperty(t.prototype,"time_scale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t},enumerable:!0,configurable:!0}),t.prototype.update=function(t){if(1!==this._timeScale&&(t*=this._timeScale),0!=t&&!(0>t)){for(var e=0,i=0,r=this._animatebles.length;r>e;++e){var s=this._animatebles[e];null!==s?(i>0&&(this._animatebles[e-i]=s,this._animatebles[e]=null),s.update(t)):i++}if(i>0){for(r=this._animatebles.length;r>e;++e){var n=this._animatebles[e];null!==n?this._animatebles[e-i]=n:i++}this._animatebles.length-=i}}},t.prototype.add=function(t){t&&this._animatebles.indexOf(t)<0&&(this._animatebles.push(t),t.clock=this)},t.prototype.clear=function(){for(var t=0,e=this._animatebles;t<e.length;t++){var i=e[t];null!==i&&(i.clock=null)}},t.prototype.remove=function(t){var e=this._animatebles.indexOf(t);e>=0&&(this._animatebles[e]=null,t.clock=null)},t.prototype.removeAt=function(t){t>=0&&(this._animatebles[t].clock=null,this._animatebles[t]=null)},t}();t.anim_clock=e,__reflect(e.prototype,"ns_sirius.anim_clock"),t.world_clock=new e,t.timer_clock=new e}(ns_sirius||(ns_sirius={}));var common_rtable=[{module_name:"Test",view:TestModuleView,vm:TestModuleVM}],SlotView=function(t){function e(){var e=t.call(this)||this;return e.item_width=126,e.item_height=94,e.item_gap=0,e.stopId=-1,e.skinName="resource/common/skins/slot_view.exml",e.imgArr=[{img:"7_png",id:7},{img:"6_png",id:6},{img:"5_png",id:5},{img:"4_png",id:4},{img:"3_png",id:3},{img:"2_png",id:2},{img:"1_png",id:1}],e}return __extends(e,t),e.prototype.createChildren=function(){this.scroller_view.scrollPolicyH=eui.ScrollPolicy.OFF,this.scroller_view.scrollPolicyV=eui.ScrollPolicy.ON,this.scroller_view.touchEnabled=!1,this.scroller_view.touchChildren=!1;var t=new eui.VerticalLayout;t.gap=this.item_gap,this.list_view.layout=t,this.imgEUIArr=new eui.ArrayCollection(this.imgArr),this.list_view.dataProvider=this.imgEUIArr,this.list_view.itemRenderer=SlotItem,this.scroller_view.visible=!1},e.prototype.initData=function(){var t=this,e=this.imgArr[this.imgArr.length-1];this.imgArr.splice(0,0,e),this.imgEUIArr=new eui.ArrayCollection(this.imgArr),this.list_view.dataProvider=this.imgEUIArr,this.scroller_view.height=this.imgArr.length*this.item_height,setTimeout(function(){t.scroller_view.viewport=t.list_view,t.scroller_view.validateNow(),t.scroller_view.viewport.scrollV=t.scroller_view.viewport.contentHeight-t.scroller_view.viewport.height-20,t.scroller_view.visible=!0},60)},e.prototype.start=function(){this.scroll_anim()},e.prototype.stop=function(t){this.stopId=t},e.prototype.scroll_anim=function(){var t=this;egret.Tween.removeTweens(this.scroller_view.viewport),egret.Tween.get(this.scroller_view.viewport).to({scrollV:-this.item_height-20},40).call(function(){if(t.stopId>0&&t.imgArr[t.imgArr.length-3].id==t.stopId)return void(t.stopId=-1);t.imgArr.splice(t.imgArr.length-1,1);var e=t.imgArr[t.imgArr.length-1];t.imgArr.splice(0,0,e),console.log(t.imgArr),t.imgEUIArr.replaceAll(t.imgArr),t.list_view.dataProvider=t.imgEUIArr,t.scroller_view.viewport=t.list_view,t.scroller_view.validateNow(),t.scroller_view.viewport.scrollV=t.scroller_view.viewport.contentHeight-t.scroller_view.viewport.height-20,t.scroll_anim()})},e.prototype.destroy=function(){},e}(eui.Component);__reflect(SlotView.prototype,"SlotView");var SlotItem=function(t){function e(){var e=t.call(this)||this;return e.skinName='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="126" height="94">\n</e:Skin>',e.img=new eui.Image,e.img.width=126,e.img.height=94,e.verticalCenter=0,e.horizontalCenter=0,e.addChild(e.img),e}return __extends(e,t),e.prototype.dataChanged=function(){this.img.source=this.data.img},e}(eui.ItemRenderer);__reflect(SlotItem.prototype,"SlotItem");var ns_sirius;!function(t){var e=function(){function t(){this._timeScale=1,this._listeners=new Array}return Object.defineProperty(t.prototype,"time_scale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t},enumerable:!0,configurable:!0}),t.prototype.register_listener=function(t){this._listeners.indexOf(t)>=0||this._listeners.push(t)},t.prototype.remove_listener=function(t){var e=this._listeners.indexOf(t);0>e||this._listeners.splice(e,1)},t.prototype.update=function(t){if(1!==this._timeScale&&(t*=this._timeScale),0!=t&&!(0>t))for(var e=0;e<this._listeners.length;e++){var i=this._listeners[e];i.is_destroyed!==!0&&this._listeners[e].update(t)}},t}();t.global_pulse_clock=e,__reflect(e.prototype,"ns_sirius.global_pulse_clock"),t.pulse_clock=new e}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(e){function i(t,i,r,s){void 0===t&&(t=null),void 0===i&&(i=null),void 0===r&&(r=0),void 0===s&&(s=null);var n=e.call(this)||this;return n._is_destroyed=!1,n._listener=t,n.anim_id=r,n._param=s,n._target_view=i,n}return __extends(i,e),i.prototype.init=function(t){return void 0===t&&(t=null),this.anim_active(t),this},i.prototype.anim_active=function(e){void 0===e&&(e=null),e?e.add(this):t.world_clock.add(this)},i.prototype.anim_deactive=function(){this._clock&&this._clock.remove(this)},i.prototype._before_destroy=function(){this._is_destroyed=!0,this.stop(),this._clock&&this._clock.remove(this),this._clock=null,this._listener=null,this._param=null,this._target_view=null},Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock=t},enumerable:!0,configurable:!0}),i.prototype.is_disposable=function(){return!1},Object.defineProperty(i.prototype,"is_animating",{get:function(){return this._is_animating},enumerable:!0,configurable:!0}),i.prototype.start=function(){this._normalized_time=0,this._real_time=0,this._anim_duration=this.animation_duration(),this._is_animating=!0,this._reset_anim_properties()},i.prototype.stop=function(){this._is_animating=!1,this._normalized_time=0,this._real_time=0,this._reset_anim_properties()},i.prototype.update=function(t){this._is_animating&&(this._real_time+=t,this._normalized_time=this._real_time/this._anim_duration,this._normalized_time>1?this._anim_update(1):this._anim_update(this._normalized_time),this._normalized_time<1||(this.stop(),this._listener&&this._listener.single_anim_comp(this),this.is_disposable()&&this.destroy()))},i.prototype.util_linear_interpolation=function(t,e,i){return t+(e-t)*i},i}(t.sirius_base_object);t.single_animation=e,__reflect(e.prototype,"ns_sirius.single_animation",["ns_sirius.IAnimatable"])}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(t){void 0===t&&(t=0),this._node_type=0,this._node_type=t}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(t){this._element=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pre",{get:function(){return this._pre},set:function(t){this._pre=t},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){1==this._node_type||2==this._node_type,this._element=null,this._next=null,this._pre=null},t.prototype.is_head=function(){return 1==this._node_type},t.prototype.is_tail=function(){return 2==this._node_type},t}();t.dll_node=e,__reflect(e.prototype,"ns_sirius.dll_node");var i=function(){function t(t){void 0===t&&(t=0),this.list_id=0,this.list_id=t,this._tail=new e(2),this._tail.next=null,this._tail.element=null,this._head=new e(1),this._head.pre=null,this._head.element=null,this._tail.pre=this._head,this._head.next=this._tail,this._length=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){for(var t=this._head,e=null;t&&!t.is_tail();)e=t.next,t.destroy(),t=e;this._head=null,this._tail=null,this._length=0},t.prototype.is_empty=function(){return this._head.next==this._tail},t.prototype.push=function(t){var i=new e;i.element=t,i.next=this._tail,i.pre=this._tail.pre,this._tail.pre.next=i,this._tail.pre=i,this._length++},t.prototype.pop=function(){if(!this.is_empty()){this._length--;var t=this._tail.pre,e=t.element;return t.pre.next=this._tail,this._tail.pre=t.pre,t.destroy(),t=null,e}},t.prototype.remove=function(t){if(!this.is_empty()){var e=this.find(t);if(e){this._length--;var i=e.pre,r=e.next;i.next=r,r.pre=i,e.destroy(),e=null}}},t.prototype.find=function(t){if(!t)return null;for(var e=this._head.next;e&&!e.is_tail();){if(e.element==t)return e;e=e.next}return null},t.prototype.find_element_by_property=function(t,e){if(!t)return null;for(var i=this._head.next;i&&!i.is_tail();){if(i.element[t]===e)return i.element;i=i.next}return null},t.prototype.get_head=function(){return this._head},t.prototype.get_tail=function(){return this._tail},t.prototype.loop_breakable=function(t){for(var e=this.get_head().next;e&&!e.is_tail();){var i=t(e.element);if(!i)break;e=e.next}},t.prototype.loop_node=function(t){for(var e=this.get_head().next;e&&!e.is_tail();)t(e),e=e.next},t.prototype.loop_element=function(t){for(var e=this.get_head().next;e&&!e.is_tail();)t(e.element),e=e.next},t.prototype.loop_element_by_property=function(t,e,i){if(!t)return null;for(var r=this._head.next;r&&!r.is_tail();)r.element[t]===e&&i(r.element),r=r.next;return null},t.prototype.remove_element_by_property=function(t,e){if(!t)return null;for(var i=this._head.next;i&&!i.is_tail();)if(i.element[t]===e){var r=i;r.pre.next=i.next,r.next.pre=i.pre,i=r.next,r.destroy(),r=null}else i=i.next;return null},t}();t.doubly_linked_list=i,__reflect(i.prototype,"ns_sirius.doubly_linked_list")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.ddid=0,e}return __extends(e,t),e.prototype._before_destroy=function(){this._target=null,this._fun=null,this._param=null},e.prototype.dispatch=function(t,e,i,r){var s=this;void 0===r&&(r=null),this._is_destroyed=!1,this._delay_time=t,this._target=e,this._fun=i,this._param=r,setTimeout(function(){s.execute_fun()},t)},e.prototype.execute_fun=function(){this._is_destroyed||(this._target&&this._fun&&this._fun.apply(this._target,[this._param]),this.destroy())},e}(t.sirius_base_object);t.DelayDispatcher=e,__reflect(e.prototype,"ns_sirius.DelayDispatcher")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.ddid=0,e}return __extends(e,t),e.prototype._before_destroy=function(){this._target=null,this._fun_repeat=null,this._fun_end=null,this._param=null,this._timeout_obj&&clearTimeout(this._timeout_obj)},e.prototype.dispatch=function(t,e,i,r,s,n){var o=this;void 0===n&&(n=null),this._is_destroyed=!1,this._delay_time=t,this._target=i,this._fun_repeat=r,this._fun_end=s,this._param=n,this._repeat_count=e,this._repeat_cursor=0,this._timeout_obj=setTimeout(function(){o._execute_step()},this._delay_time)},e.prototype._execute_step=function(){var t=this;return this._execute_repeat(this._repeat_cursor),this._repeat_cursor++,this._repeat_cursor>=this._repeat_count?void this._execute_fun():void(this._timeout_obj=setTimeout(function(){t._execute_step()},this._delay_time))},e.prototype._execute_repeat=function(t){this._is_destroyed||this._target&&this._fun_repeat&&this._fun_repeat.apply(this._target,[t,this._param])},e.prototype._execute_fun=function(){this._is_destroyed||(this._target&&this._fun_end&&this._fun_end.apply(this._target,[this._param]),this.destroy())},e}(t.sirius_base_object);t.RepeatDispatcher=e,__reflect(e.prototype,"ns_sirius.RepeatDispatcher")}(ns_sirius||(ns_sirius={}));var ns_sirius_math;!function(t){function e(t,e,i,r){var s=t-i,n=e-r;return Math.sqrt(s*s+n*n)}t.points_distance=e}(ns_sirius_math||(ns_sirius_math={}));var ns_sirius_math;!function(t){function e(t){return t=(9301*t+49297)%233280,t/233280}function i(t,i){var r=(t+1)*(i+1),s=Math.ceil(1e4*e(r))/1e4;return s}t.random=i}(ns_sirius_math||(ns_sirius_math={}));var sirius_str_util;!function(t){}(sirius_str_util||(sirius_str_util={}));var ns_sirius;!function(t){function e(t){return t.pool_data}t.pool_data=e;var i=function(){function t(){this.is_free=!0}return t}();t.pool_obj_data=i,__reflect(i.prototype,"ns_sirius.pool_obj_data");var r=function(){function t(t){this._size=t,this._stack=new Array(t),this._flags=new Array(t)}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._find_free_index()<0},enumerable:!0,configurable:!0}),t.prototype.pool_init=function(t,e){for(var r=0;r<this._size;r++)this._stack[r]=new t,this._stack[r].pool_data=new i,this._flags[r]=0,e(this._stack[r])},t.prototype.borrow=function(){var t=this._find_free_index();if(0>t)return null;this._flags[t]=1;var e=this._stack[t];return e.pool_data.is_free=!1,e.pool_status_goto_busy&&e.pool_status_goto_busy(),this._stack[t]},t.prototype.giveback=function(t){var e=this._stack.indexOf(t);if(!(0>e)){this._flags[e]=0;var i=this._stack[e];i.pool_data.is_free=!0,i.pool_status_goto_idle&&i.pool_status_goto_idle()}},t.prototype.get_array=function(){return this._stack},t.prototype.destroy=function(){for(var t=0;t<this._size;t++){var e=this._stack[t];e.destroy()}this._stack=null,this._flags=null},t.prototype.pool_reset=function(){for(var t=0;t<this._size;t++){var e=this._stack[t];e.pool_data.is_free=!0,this._flags[t]=0,e.pool_status_goto_idle&&e.pool_status_goto_idle()}},t.prototype.enumerate_all_busy=function(t){for(var i=0;i<this._size;i++){var r=this._stack[i];e(r).is_free||r.is_destroyed||t(r)}},t.prototype._find_free_index=function(){for(var t=0;t<this._size;t++)if(0===this._flags[t])return t;return-1},t}();t.dynamic_pool=r,__reflect(r.prototype,"ns_sirius.dynamic_pool")}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(t){var e=function(){function t(t){this._stack=new Array(t),this._size=t,this._cursor=0}return t.prototype.pool_init=function(t){for(var e=0;e<this._size;e++)this._stack[e]=new t},t.prototype.borrow=function(){var t=this._stack[this._cursor];return this._cursor++,this._cursor>=this._size&&(this._cursor=0),t},t.prototype.get_stack=function(){return this._stack},t.prototype.destroy=function(){this._stack=null},t}();t.rotational_deprived_fixed_pool=e,__reflect(e.prototype,"ns_sirius.rotational_deprived_fixed_pool")}(ns_sirius||(ns_sirius={}));var sirius_str_util;!function(t){function e(t,e){var i=t.toFixed(e);return parseFloat(i)}function i(t,e){return t.toFixed(e)}function r(t){var e="";return e=10>t?"0"+t:t+""}function s(t){var e="";return e=10>t?"00"+t:100>t?"0"+t:t+""}t.float_fixed=e,t.float_fixed_str=i,t.add_zero_2=r,t.add_zero_3=s}(sirius_str_util||(sirius_str_util={}));